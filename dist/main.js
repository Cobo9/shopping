(()=>{"use strict";const e=document.querySelector(".form"),t=document.querySelector(".name"),a=document.querySelector(".number"),n=document.querySelector("#amount"),i=document.querySelector("#weight"),r=document.querySelector(".article"),s=document.querySelector(".lists__container"),c=document.querySelector(".counter"),u=document.querySelector(".total__weight"),l=document.querySelector(".total__amount");let d=Math.random(),o={vegetables:[],fruit:[],dairy:[],bread:[],hygienics:[]},h=0;const m=class{static saveProducts(e){localStorage.setItem("products",JSON.stringify(e))}static getProduct(){return JSON.parse(localStorage.getItem("products"))}},y=function(e,t){t.textContent=e.reduce(((e,t)=>e+t),0)},b=function(){const e=this.dataset.article;let t=JSON.parse(JSON.stringify(o)),a=t[e].filter((e=>e.id!=this.dataset.key));t[e]=a,o=t,m.saveProducts(o),p()},f=function(){const e=[...document.querySelectorAll(".li__input")].filter((e=>e.dataset.key==this.dataset.key));let t=JSON.parse(JSON.stringify(o));Object.keys(t).forEach((a=>{if(this.dataset.article==a){const n=t[a].find((e=>e.id==this.dataset.key));e.forEach(((t,a)=>{!0===t.disabled?t.disabled=!1:!1===t.disabled&&(t.disabled=!0,0===a?n.name=e[0].value:1===a&&(n.number=e[1].value))}))}})),o=t,m.saveProducts(o)},p=function(){s.innerHTML="",h=0;let e=m.getProduct()||o;o=e;let t=[],a=[];Object.keys(e).forEach((n=>{if(0!=e[n].length){let i="";e[n].forEach((e=>{i+=`<li>\n                        <input class='li__input' type='text' value='${e.name}' data-key=${e.id} disabled/>\n                        <input class='li__input' type='number' value=${e.number} data-key=${e.id} disabled/>\n                        <span>${e.amount?"szt.":"kg"}</span>\n                        <button class='editBtn' data-key=${e.id} data-article=${e.article}>Edytuj</button>\n                        <button class='deleteBtn' data-key=${e.id} data-article=${e.article}>X</button>\n                        </li>`,e.amount?t.push(Number(e.number)):e.weight&&a.push(Number(e.number))}));let r=`<div>\n                        <h1>${n}</h1> <span>${e[n].length} items in ${n}</span>\n                          <ul>\n                            ${i}\n                          </ul>\n                      </div>`;h+=o[n].length,c.textContent=`There are ${h} items on the lists in total`,s.innerHTML+=r}})),y(t,l),y(a,u),[...document.querySelectorAll(".deleteBtn")].forEach((e=>e.addEventListener("click",b))),[...document.querySelectorAll(".editBtn")].forEach((e=>e.addEventListener("click",f)))};e.addEventListener("submit",(function(e){e.preventDefault(),function(){const e=new class{constructor(e,t,a,n,i,r){this.name=e,this.number=t,this.amount=a,this.weight=n,this.article=i,this.id=r}}(t.value,a.value,n.checked,i.checked,r.value,d);switch(d++,e.article){case"vegetables":o.vegetables.push(e);break;case"fruit":o.fruit.push(e);break;case"dairy":o.dairy.push(e);break;case"bread":o.bread.push(e);break;case"hygienics":o.hygienics.push(e)}m.saveProducts(o),p()}()})),document.addEventListener("DOMContentLoaded",(()=>{p()}))})();